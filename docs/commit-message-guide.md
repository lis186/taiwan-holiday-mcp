# Git Commit Message 撰寫指南

## 格式規範

```
<類型>(<範圍>): <簡短描述>

<詳細描述>（可選）

<相關任務/議題>（可選）
```

## 類型定義

| 類型 | 說明 | 範例 |
|------|------|------|
| `feat` | 新功能 | `feat(core): 新增農曆假期計算功能` |
| `fix` | 錯誤修復 | `fix(api): 修復日期範圍驗證邏輯` |
| `docs` | 文件更新 | `docs: 更新 API 使用說明` |
| `style` | 程式碼格式調整 | `style: 統一縮排格式` |
| `refactor` | 重構 | `refactor(core): 重構假期查詢邏輯` |
| `test` | 測試相關 | `test: 新增整合測試案例` |
| `chore` | 建置工具變動 | `chore: 更新依賴套件版本` |
| `perf` | 效能改善 | `perf(api): 優化查詢效能` |
| `ci` | CI/CD 相關 | `ci: 新增自動化測試流程` |

## 範圍定義

| 範圍 | 說明 |
|------|------|
| `core` | 核心功能模組 |
| `api` | API 介面相關 |
| `test` | 測試相關 |
| `docs` | 文件相關 |
| `config` | 配置相關 |
| `build` | 建置相關 |

## 撰寫原則

### 1. 語言使用
- **主要語言**：繁體中文
- **技術術語**：可使用英文（如 API、MCP、TypeScript）
- **一致性**：同一專案保持語言風格統一

### 2. 格式要求
- **簡短描述**：限制在 50 字元內
- **動詞時態**：使用現在式（新增、修復、更新）
- **標點符號**：簡短描述不加句號

### 3. 內容要求
- **清晰明確**：描述具體做了什麼
- **避免模糊**：不使用「一些」、「部分」等模糊詞彙
- **包含影響**：說明變更的影響範圍

## 範例對照

### ✅ 良好範例

```bash
feat(core): 新增台灣國定假日查詢功能

實作 2024-2025 年台灣國定假日資料
支援農曆新年、中秋節等傳統節日計算
新增假日類型分類功能

相關任務: Task 2.1
```

```bash
fix(api): 修復日期格式驗證問題

解決輸入非標準日期格式時的錯誤處理
改善錯誤訊息的可讀性
新增邊界條件測試案例
```

```bash
docs: 更新 MCP 伺服器使用說明

新增安裝步驟詳細說明
補充 API 端點使用範例
修正文件中的錯字和格式問題
```

### ❌ 需要改善的範例

```bash
# 太模糊
update stuff

# 混合語言不一致
feat: 新增 some new features

# 太長
feat(core): 完成 Task 2.1 假期資料服務與單元測試包含新增台灣假期資料結構定義實作假期查詢邏輯建立完整的單元測試套件

# 使用過去式
feat(core): 已完成假期查詢功能
```

## 設定 Git 模板

執行以下命令設定 commit message 模板：

```bash
git config commit.template .gitmessage
```

## 驗證工具

可考慮使用以下工具進行 commit message 驗證：

- **commitlint**: 自動驗證 commit message 格式
- **husky**: Git hooks 管理工具
- **conventional-changelog**: 自動生成變更日誌

## 遷移策略

對於現有的不一致 commit message：

1. **新的 commit** 嚴格遵循新規範
2. **歷史 commit** 保持不變（避免 rebase 風險）
3. **重要里程碑** 可考慮建立 tag 標記

## 團隊協作

- 在 PR review 時檢查 commit message 格式
- 定期回顧和改善規範
- 新成員加入時提供此指南 